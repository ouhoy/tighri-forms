{"ast":null,"code":"import cookie from\"js-cookie\";// set in the cookie\nexport var setCookie=function setCookie(key,value){if(window!==\"undefined\"){cookie.set(key,value,{expires:1});}};// remove the cookie\nexport var removeCookie=function removeCookie(key){if(window!==\"undefined\"){cookie.remove(key,{expires:1});}};// get from such as stored token\nexport var getCookie=function getCookie(key){if(window!==\"undefined\"){return cookie.get(key);}};//set in local storage\nexport var setLocalStorage=function setLocalStorage(key,value){if(window!==\"undefined\"){localStorage.setItem(key,JSON.stringify(value));}};// rm f local storage\nexport var removeLocalStorage=function removeLocalStorage(key){if(window!==\"undefined\"){localStorage.removeItem(key);}};//auth user by passing data to cookie and localstorage guring signin\nexport var authenticate=function authenticate(response,next){setCookie(\"userData\",response.data.user._id);setCookie(\"token\",response.data.token);setLocalStorage(\"user\",response.data.user);next();};//access\nexport var isAuth=function isAuth(){if(window!==\"undefined\"){var cookieChecked=getCookie('token');if(cookieChecked){if(localStorage.getItem(\"user\")){return JSON.parse(localStorage.getItem(\"user\"));}else{return false;}}}};export var signout=function signout(next){removeCookie('token');removeLocalStorage(\"user\");next();};","map":{"version":3,"sources":["C:/Users/abdel/Desktop/MERN APP/MERN - Auth main/client/src/routes/auth.js"],"names":["cookie","setCookie","key","value","window","set","expires","removeCookie","remove","getCookie","get","setLocalStorage","localStorage","setItem","JSON","stringify","removeLocalStorage","removeItem","authenticate","response","next","data","user","_id","token","isAuth","cookieChecked","getItem","parse","signout"],"mappings":"AAAA,MAAOA,CAAAA,MAAP,KAAmB,WAAnB,CAGA;AACA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,GAAD,CAAMC,KAAN,CAAe,CACpC,GAAGC,MAAM,GAAI,WAAb,CAA0B,CACtBJ,MAAM,CAACK,GAAP,CAAWH,GAAX,CAAgBC,KAAhB,CAAsB,CAClBG,OAAO,CAAE,CADS,CAAtB,EAGH,CACJ,CANM,CAOP;AACA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACL,GAAD,CAAQ,CAChC,GAAGE,MAAM,GAAI,WAAb,CAA0B,CACtBJ,MAAM,CAACQ,MAAP,CAAcN,GAAd,CAAmB,CACfI,OAAO,CAAE,CADM,CAAnB,EAGH,CACJ,CANM,CAOP;AACA,MAAO,IAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACP,GAAD,CAAQ,CAC7B,GAAGE,MAAM,GAAI,WAAb,CAA0B,CACxB,MAAOJ,CAAAA,MAAM,CAACU,GAAP,CAAWR,GAAX,CAAP,CACD,CACJ,CAJM,CAKP;AACA,MAAO,IAAMS,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACT,GAAD,CAAMC,KAAN,CAAe,CAC1C,GAAGC,MAAM,GAAI,WAAb,CAA0B,CACxBQ,YAAY,CAACC,OAAb,CAAqBX,GAArB,CAA0BY,IAAI,CAACC,SAAL,CAAeZ,KAAf,CAA1B,EACD,CACJ,CAJM,CAKP;AACA,MAAO,IAAMa,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACd,GAAD,CAAQ,CACtC,GAAGE,MAAM,GAAI,WAAb,CAA0B,CACxBQ,YAAY,CAACK,UAAb,CAAwBf,GAAxB,EACD,CACJ,CAJM,CAKP;AACA,MAAO,IAAMgB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,CAAWC,IAAX,CAAmB,CAC3CnB,SAAS,CAAC,UAAD,CAAckB,QAAQ,CAACE,IAAT,CAAcC,IAAd,CAAmBC,GAAjC,CAAT,CAEAtB,SAAS,CAAC,OAAD,CAAWkB,QAAQ,CAACE,IAAT,CAAcG,KAAzB,CAAT,CACAb,eAAe,CAAC,MAAD,CAAUQ,QAAQ,CAACE,IAAT,CAAcC,IAAxB,CAAf,CACAF,IAAI,GACP,CANM,CAOP;AACA,MAAO,IAAMK,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAK,CACvB,GAAGrB,MAAM,GAAK,WAAd,CAA2B,CAC3B,GAAMsB,CAAAA,aAAa,CAAGjB,SAAS,CAAC,OAAD,CAA/B,CACA,GAAGiB,aAAH,CAAkB,CACd,GAAGd,YAAY,CAACe,OAAb,CAAqB,MAArB,CAAH,CAAgC,CAC5B,MAAOb,CAAAA,IAAI,CAACc,KAAL,CAAWhB,YAAY,CAACe,OAAb,CAAqB,MAArB,CAAX,CAAP,CACH,CAFD,IAEM,CACF,MAAO,MAAP,CACH,CACJ,CACA,CACJ,CAXM,CAeP,MAAO,IAAME,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAT,IAAI,CAAG,CAC1Bb,YAAY,CAAC,OAAD,CAAZ,CACAS,kBAAkB,CAAC,MAAD,CAAlB,CACAI,IAAI,GACP,CAJM","sourcesContent":["import cookie from \"js-cookie\";\r\n\r\n\r\n// set in the cookie\r\nexport const setCookie = (key, value) =>{\r\n    if(window!== \"undefined\") {\r\n        cookie.set(key, value,{\r\n            expires: 1\r\n        })\r\n    }\r\n}\r\n// remove the cookie\r\nexport const removeCookie = (key) =>{\r\n    if(window!== \"undefined\") {\r\n        cookie.remove(key, {\r\n            expires: 1\r\n        })\r\n    }\r\n}\r\n// get from such as stored token\r\nexport const getCookie = (key) =>{\r\n    if(window!== \"undefined\") {\r\n      return cookie.get(key)\r\n    }\r\n}\r\n//set in local storage\r\nexport const setLocalStorage = (key, value) =>{\r\n    if(window!== \"undefined\") {\r\n      localStorage.setItem(key, JSON.stringify(value))\r\n    }\r\n}\r\n// rm f local storage\r\nexport const removeLocalStorage = (key) =>{\r\n    if(window!== \"undefined\") {\r\n      localStorage.removeItem(key)\r\n    }\r\n}\r\n//auth user by passing data to cookie and localstorage guring signin\r\nexport const authenticate = (response, next) =>{\r\n    setCookie(\"userData\" , response.data.user._id)\r\n\r\n    setCookie(\"token\" , response.data.token)\r\n    setLocalStorage(\"user\" , response.data.user)\r\n    next();\r\n}\r\n//access\r\nexport const isAuth = () =>{\r\n    if(window !== \"undefined\") {\r\n    const cookieChecked = getCookie('token')\r\n    if(cookieChecked) {\r\n        if(localStorage.getItem(\"user\")){\r\n            return JSON.parse(localStorage.getItem(\"user\"))\r\n        }else {\r\n            return false;\r\n        }\r\n    }\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const signout = next =>{\r\n    removeCookie('token')\r\n    removeLocalStorage(\"user\")\r\n    next();\r\n}\r\n"]},"metadata":{},"sourceType":"module"}